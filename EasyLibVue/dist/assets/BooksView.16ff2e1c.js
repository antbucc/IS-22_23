import{r as _,o as T,w as y,a as r,c,b as e,d as C,v as E,t as i,F as d,e as L,u as f,f as h,l as a,g as U}from"./index.0bc8e638.js";import{f as x,b as I,c as N,d as P}from"./books.99e2b73c.js";const S=e("span",null,"Insert a new book",-1),w=e("br",null,null,-1),V=e("br",null,null,-1),A={style:{color:"red"}},D=e("h1",null,"Books:",-1),O=["href"],M=h(" - "),R=["onClick"],$=h(" - "),F=["onClick"],H={setup(p){const u={}.VITE_API_HOST||"http://localhost:8080",v=u+"/api/v1"+"/booklendings",l=_(""),s=_("");T(()=>{x()}),y(a,(o,t)=>{s.value=""});function g(){if(l.value==""){s.value="Please specify a valid title!";return}s.value="",N(l.value).catch(o=>console.error(o))}function B(o){P(o).catch(t=>console.error(t))}function b(o){if(!a.token){s.value="Please login to take a book!";return}s.value="",fetch(v,{method:"POST",headers:{"Content-Type":"application/json","x-access-token":a.token},body:JSON.stringify({student:a.self,book:o.self})}).then(t=>{}).catch(t=>console.error(t))}return(o,t)=>(r(),c(d,null,[e("form",null,[S,w,C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>l.value=n)},null,512),[[E,l.value]]),e("button",{type:"button",onClick:g},"Create book "+i(l.value),1),V,e("span",A,i(s.value),1)]),D,e("ul",null,[(r(!0),c(d,null,L(f(I).value,n=>(r(),c("li",{key:n.self},[e("a",{href:f(u)+n.self},i(n.title),9,O),M,e("button",{onClick:m=>b(n)},"TAKE",8,R),$,e("button",{onClick:m=>B(n)},"DELETE",8,F)]))),128))])],64))}},J={setup(p){return(u,k)=>(r(),c("div",null,[U(H)]))}};export{J as default};
